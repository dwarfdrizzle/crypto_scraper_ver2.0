(()=>{function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||e(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){if(t){if("string"==typeof t)return n(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(t,e):void 0}}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}$(document).ready((function(){var n=document.getElementById("btcChart").getContext("2d"),r=new Chart(n,{type:"line",data:{datasets:[{label:"BTC Price",data:[],fill:!1,borderColor:"#fff",tension:.1}]},options:{animation:{duration:500},scales:{y:{beginAtZero:!1},x:{type:"time",time:{unit:"minute",displayFormats:{minute:"HH:mm:ss"},parser:"YYYY-MM-DDTHH:mm:ssZ"}}}}}),a={Binance:"#FF5733","Coinbase Pro":"#33FF57",Poloniex:"#3357FF",Bybit:"#68f597",Gateio:"#464531",Bitfinex:"#A2231D","Crypto.com":"#3B83BD"};function o(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"BTC";$.ajax({url:"/".concat(n.toLowerCase(),"_prices"),type:"GET",dataType:"json",success:function(o){var c=o.map((function(t){return new Date(t.timestamp).toISOString()}));uniqueTimestamps=t(new Set(c)).sort();var l=t(new Set(o.map((function(t){return t.exchange}))));for(l.forEach((function(t){var e=o.filter((function(e){return e.exchange===t})),n=[];uniqueTimestamps.forEach((function(t){var r=e.find((function(e){return new Date(e.timestamp).toISOString()===t}));n.push(r?r.price:null)}));var i=a[t]||"",c=r.data.datasets.find((function(e){return e.label===t}));c?(c.data=n,c.borderColor=i):r.data.datasets.push({label:t,data:n,fill:!1,borderColor:i,borderWidth:1,pointRadius:2,pointBackgroundColor:"rgba(255,255,255,1)",tension:.2})}));r.data.datasets.length>l.length;)r.data.datasets.pop();r.data.labels=uniqueTimestamps,r.update(),function(t,e){console.log("Updating the data table...");var n=$(".recent-data-box tbody");n.empty(),t.slice(-30).forEach((function(t){var r=dayjs(t.timestamp).format("YYYY-MM-DD HH:mm:ss"),a='\n                <tr>\n                    <td data-title="Crypto">'.concat(e,'</td>\n                    <td data-title="Exchange">').concat(t.exchange,'</td>\n                    <td data-title="Price">').concat(t.price,'</td>\n                    <td data-title="Volume">').concat(t.volume,'</td>\n                    <td data-title="Timestamp">').concat(r,"</td> \x3c!-- Use formatted date here --\x3e\n                </tr>\n            ");n.append(a)}))}(o,n),function(t){$("#avgPrice").text(i(t).toFixed(2)),$("#stdDev").text(function(t){var e=i(t),n=t.reduce((function(t,n){return t+Math.pow(n.price-e,2)}),0);return Math.sqrt(n/t.length)}(t).toFixed(2))}(o),function(t){var n,r={},a=function(t,n){var r="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!r){if(Array.isArray(t)||(r=e(t))){r&&(t=r);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,c=!0,l=!1;return{s:function(){r=r.call(t)},n:function(){var t=r.next();return c=t.done,t},e:function(t){l=!0,i=t},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw i}}}}(t);try{for(a.s();!(n=a.n()).done;){var o=n.value;(!r[o.exchange]||o.timestamp>r[o.exchange].timestamp)&&(r[o.exchange]=o)}}catch(t){a.e(t)}finally{a.f()}var i=Object.values(r).sort((function(t,e){return e.price-t.price})),c=i.length>0?parseFloat(i[0].price):0,l=document.getElementById("rankings-body");l.innerHTML="",i.forEach((function(t,e){var n=l.insertRow(),r=n.insertCell(0),a=n.insertCell(1),o=n.insertCell(2),i=n.insertCell(3);r.textContent=e+1,a.textContent=t.exchange,o.textContent=t.price;var d=c-parseFloat(t.price);i.textContent=d.toFixed(2)}))}(o)},error:function(t){console.error("Error:",t)}})}function i(t){return t.reduce((function(t,e){return t+e.price}),0)/t.length}o(),setInterval(o,1e3)})),data.forEach((function(t){var e='<tr>\n        <td data-label="Rank">'.concat(t.rank,'</td>\n        <td data-label="Exchange">').concat(t.name,'</td>\n        <td data-label="Price">').concat(t.price,'</td>\n        <td data-label="Î” H-Current">').concat(t.delta,"</td>\n    </tr>");document.getElementById("rankings-body").innerHTML+=e})),window.addEventListener("scroll",(function(){console.log("Scroll event triggered"),document.querySelectorAll(".mission-statement svg").forEach((function(t,e){console.log("Checking SVG ".concat(e)),t.getBoundingClientRect().top<window.innerHeight?(console.log("Animating SVG ".concat(e)),t.classList.add("active")):t.classList.remove("active")}))})),document.addEventListener("DOMContentLoaded",(function(){var t=document.querySelector(".hero-section .grid-container");if(t)for(var e=0;e<16;e++){var n=document.createElement("div");t.appendChild(n)}}))})();